<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="${moduleId}-moveCapableRoutingStore" abstract="true">
        <property name="policyComponent" ref="policyComponent" />
        <property name="dictionaryService" ref="DictionaryService" />
        <property name="nodeService" ref="NodeService" />
        <property name="storesCache" ref="routingContentStoreCache" />
    </bean>

    <bean id="${moduleId}-propertyRestrictableRoutingStore" abstract="true" parent="${moduleId}-moveCapableRoutingStore">
        <property name="namespaceService" ref="NamespaceService" />
    </bean>

    <bean id="${moduleId}-commonFacadeStore" abstract="true">
        <property name="namespaceService" ref="NamespaceService" />
        <property name="dictionaryService" ref="DictionaryService" />
    </bean>

    <bean id="simpleContentStoresTemplate-selectorPropertyRoutingStore" abstract="true"
        class="${project.artifactId}.store.routing.SelectorPropertyContentStore" parent="${moduleId}-propertyRestrictableRoutingStore">
        <property name="constraintRegistry" ref="cm:constraintRegistry" />
    </bean>
    <alias alias="simpleContentStoresTemplate-selectorPropertyStore" name="simpleContentStoresTemplate-selectorPropertyRoutingStore" />

    <bean id="simpleContentStoresTemplate-siteRoutingStore" abstract="true"
        class="${project.artifactId}.store.routing.SiteRoutingContentStore" parent="${moduleId}-propertyRestrictableRoutingStore" />

    <bean id="simpleContentStoresTemplate-tenantRoutingStore" abstract="true"
        class="${project.artifactId}.store.routing.TenantRoutingContentStore" parent="${moduleId}-propertyRestrictableRoutingStore" />

    <bean id="simpleContentStoresTemplate-siteRoutingFileStore" abstract="true"
        class="${project.artifactId}.store.file.SiteRoutingFileContentStore" parent="${moduleId}-moveCapableRoutingStore">
        <property name="namespaceService" ref="NamespaceService" />
    </bean>

    <bean id="simpleContentStoresTemplate-standardFileStore" abstract="true" class="${project.artifactId}.store.file.FileContentStore" />

    <bean id="simpleContentStoresTemplate-defaultTenantFileStore" abstract="true"
        class="${project.artifactId}.store.file.TenantRoutingFileContentStore" parent="baseTenantRoutingContentStore" />

    <bean id="simpleContentStoresTemplate-dummyFallbackStore" abstract="true"
        class="${project.artifactId}.store.file.DummyFallbackContentStore">
        <property name="mimetypeService" ref="MimetypeService" />
        <property name="dummyFilePaths">
            <list>
                <value>classpath:alfresco/module/*/dummyFallbackContentStore</value>
                <value>classpath:alfresco/extension/dummyFallbackContentStore</value>
            </list>
        </property>
        <property name="transformationCandidateSourceMimetypes">
            <list>
                <value>text/plain</value>
                <value>image/png</value>
                <value>application/pdf</value>
                <value>application/vnd.openxmlformats-officedocument.wordprocessingml.document</value>
                <value>application/vnd.openxmlformats-officedocument.presentationml.presentation</value>
                <value>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</value>
                <value>application/vnd.oasis.opendocument.text</value>
                <value>application/vnd.oasis.opendocument.presentation</value>
                <value>application/vnd.oasis.opendocument.spreadsheet</value>
            </list>
        </property>
    </bean>

    <alias alias="simpleContentStoresTemplate-siteAwareMultiDirectoryFileStore"
        name="simpleContentStoresTemplate-siteRoutingFileStore" />

    <bean id="simpleContentStoresTemplate-deduplicatingFacadeStore" abstract="true"
        class="${project.artifactId}.store.facade.DeduplicatingContentStore" parent="${moduleId}-commonFacadeStore">
        <property name="temporaryStore">
            <bean class="${project.artifactId}.store.file.FileContentStore">
                <property name="rootDirectory" value="${java.io.tmpdir}/Alfresco" />
            </bean>
        </property>
    </bean>

    <bean id="simpleContentStoresTemplate-standardCachingStore" class="${project.artifactId}.beans.CachingContentStoreFactoryBean"
        scope="prototype">
        <property name="cacheFactory" ref="cacheFactory" />
        <property name="scheduler" ref="schedulerFactory" />
    </bean>

    <bean id="simpleContentStoresTemplate-aggregatingStore" abstract="true"
        class="${project.artifactId}.store.combination.AggregatingContentStore" />

    <bean id="simpleContentStoresTemplate-compressingFacadeStore" abstract="true"
        class="${project.artifactId}.store.facade.CompressingContentStore" parent="${moduleId}-commonFacadeStore">
        <property name="temporaryStore">
            <bean class="${project.artifactId}.store.file.FileContentStore">
                <property name="rootDirectory" value="${java.io.tmpdir}/Alfresco" />
            </bean>
        </property>
    </bean>

    <bean id="simpleContentStoresTemplate-encryptingFacadeStore" abstract="true"
        class="${project.artifactId}.store.facade.EncryptingContentStore" parent="${moduleId}-commonFacadeStore">
        <property name="contentDataDAO" ref="contentDataDAO" />
    </bean>
</beans>